(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84f8cf22"],{"1da3":function(t,e,a){"use strict";var i=a("e810"),s=a.n(i);s.a},e369:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"blog-container"},[a("div",{staticClass:"blog-pages"},[a("div",{staticClass:"col-md-12 panel"},[a("div",{staticClass:"panel-body"},[a("h2",{staticClass:"text-center"},[t._v("创作文章")]),a("hr"),a("div",{attrs:{"data-validator-form":""}},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.title,expression:"title",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator:blur.required",value:{title:"标题"},expression:"{ title: '标题' }",arg:"blur",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写标题"},domProps:{value:t.title},on:{input:[function(e){e.target.composing||(t.title=e.target.value.trim())},t.saveTitle],blur:function(e){return t.$forceUpdate()}}})]),t._m(0),a("br"),a("el-select",{staticClass:"select-type",attrs:{placeholder:"请选择文章分类"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.post}},[t._v("发 布")])])],1)])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("textarea",{attrs:{id:"editor"}})])}],n=a("ebfb"),l=a.n(n),r=a("1487"),o=a.n(r),c=a("e8ec"),u=a("acd6");window.hljs=o.a;var d={name:"Create",data:function(){return{title:"",content:"",aid:void 0,options:[{value:"程序人生",label:"程序人生"},{value:"服务器端",label:"服务器端"},{value:"HTML/CSS",label:"HTML/CSS"}],value:""}},beforeRouteEnter:function(t,e,a){console.log(t),a()},created:function(){this.$route.params.articleId&&(this.aid=this.$route.params.articleId)},mounted:function(){var t=this,e=new l.a({element:document.querySelector("#editor"),placeholder:"请使用 Markdown 格式书写 ;-)，代码片段黏贴时请注意使用高亮语法。",spellChecker:!1,autoDownloadFontAwesome:!1,autosave:{enabled:!0,uniqueId:"vuejs-essential"},renderingConfig:{codeSyntaxHighlighting:!0}});e.codemirror.on("change",(function(){t.content=e.value()})),this.simplemde=e,this.fillContent(this.aid)},methods:{saveTitle:function(){c["a"].setItem("smde_title",this.title)},fillContent:function(t){var e=this.simplemde,a=c["a"].getItem("smde_title");t?(this.title=c["a"].getItem("article").title,this.content=c["a"].getItem("article").content,this.value=c["a"].getItem("article").atype,e.value(this.content)):(null!==a&&(this.title=a),this.content=e.value())},post:function(){var t=this,e=this.title,a=this.content,i=this.$store.state.user.id,s=this.value;""==s?this.$message.error("请选择文章分类"):void 0==this.aid?""!==e&&""!==a.trim()&&Object(u["h"])(e,a,s,i).then((function(e){t.$message({message:"发表成功",type:"success"}),Object(u["e"])(i).then((function(e){t.clearData(),t.$router.push({name:"Content",params:{user:t.$store.state.user.username,articleId:e.data.id}})})).catch((function(t){console.log(t)}))})).catch((function(e){t.$message.error("发表失败")})):Object(u["c"])(this.title,this.content,this.value,this.aid).then((function(e){t.$message({message:"编辑成功",type:"success"}),t.clearData(),t.$router.push({name:"Content",params:{user:t.$store.state.user.username,articleId:t.aid}})})).catch((function(e){t.$message.error("编辑失败")}))},clearData:function(){this.title="",c["a"].removeItem("smde_title"),this.simplemde.value(""),this.simplemde.clearAutosavedValue()},setArticleId:function(t){this.aid=t,this.fillContent(t)}}},m=d,h=(a("1da3"),a("2877")),v=Object(h["a"])(m,i,s,!1,null,null,null);e["default"]=v.exports},e810:function(t,e,a){}}]);
//# sourceMappingURL=chunk-84f8cf22.93461016.js.map