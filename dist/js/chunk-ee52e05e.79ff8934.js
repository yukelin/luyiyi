(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee52e05e"],{"1ab2":function(e,t,s){"use strict";var r=s("d7b7"),a=s.n(r);a.a},7898:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-md-9 col-sm-12 col-xs-12 left-col pull-right"},[s("div",{staticClass:"panel article-body article-index"},[s("div",{staticClass:"panel-body"},[s("div",{staticClass:"user-top"},[s("div",{staticClass:"user-title"},[e._v("全部用户")]),s("div",{staticClass:"add-user",on:{click:function(t){e.dialogFormVisible=!0}}},[e._m(0)])]),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,"row-key":"id",border:"",lazy:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[s("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("img",{staticClass:"img-avatar",attrs:{src:e.row.avatar,"min-width":"70",height:"70"}})]}}])}),s("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center",width:"100"}}),s("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100",align:"center"}}),s("el-table-column",{attrs:{prop:"school",label:"学校",width:"100",align:"center"}}),s("el-table-column",{attrs:{prop:"introduce",label:"个人简介",align:"center"}}),s("el-table-column",{attrs:{align:"center",width:"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n            操作\n          ")]}},{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)]),s("el-dialog",{attrs:{title:"添加用户",visible:e.dialogFormVisible,center:"",width:"370px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{attrs:{model:e.formuser}},[s("div",{staticClass:"form-group"},[s("el-input",{attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-user-solid"},on:{blur:function(t){return e.checkUsername(e.formuser.username)}},model:{value:e.formuser.username,callback:function(t){e.$set(e.formuser,"username","string"===typeof t?t.trim():t)},expression:"formuser.username"}})],1),s("div",{staticClass:"form-group"},[s("el-input",{attrs:{id:"password",type:"password",placeholder:"请填写密码","prefix-icon":"el-icon-warning"},on:{blur:function(t){return e.checkPassword(e.formuser.password)}},model:{value:e.formuser.password,callback:function(t){e.$set(e.formuser,"password","string"===typeof t?t.trim():t)},expression:"formuser.password"}})],1),s("div",{staticClass:"form-group"},[s("el-input",{attrs:{type:"password",placeholder:"请填写确认密码","prefix-icon":"el-icon-success"},on:{blur:e.confirmPass},model:{value:e.formuser.cpassword,callback:function(t){e.$set(e.formuser,"cpassword","string"===typeof t?t.trim():t)},expression:"formuser.cpassword"}})],1)]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.addConfirm}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"添加用户",visible:e.dialogEditVisible,center:"",width:"370px"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[s("el-form",{attrs:{model:e.edituser}},[s("div",{staticClass:"form-group flex"},[s("img",{staticClass:"avatar-preview-img",attrs:{src:e.edituser.avatar}}),s("div",{staticClass:"avatar-address"},[s("div",{staticClass:"avatar-pre-title"},[e._v("头像地址链接:")]),s("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.edituser.avatar,expression:"edituser.avatar",modifiers:{trim:!0,lazy:!0}},{name:"validator",rawName:"v-validator.required",value:{title:"头像地址"},expression:"{ title: '头像地址' }",modifiers:{required:!0}}],staticClass:"form-control avatar-input",attrs:{type:"text"},domProps:{value:e.edituser.avatar},on:{change:function(t){e.$set(e.edituser,"avatar",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),s("div",{staticClass:"form-group"},[s("el-input",{attrs:{id:"password",type:"text",placeholder:"请填写密码","prefix-icon":"el-icon-warning"},on:{blur:function(t){return e.checkPassword(e.edituser.password)}},model:{value:e.edituser.password,callback:function(t){e.$set(e.edituser,"password","string"===typeof t?t.trim():t)},expression:"edituser.password"}})],1),s("div",{staticClass:"form-group"},[s("label",{staticClass:"label-sex"},[e._v("性别")]),s("el-radio",{attrs:{label:"male"},model:{value:e.edituser.sex,callback:function(t){e.$set(e.edituser,"sex",t)},expression:"edituser.sex"}},[e._v("男")]),s("el-radio",{attrs:{label:"female"},model:{value:e.edituser.sex,callback:function(t){e.$set(e.edituser,"sex",t)},expression:"edituser.sex"}},[e._v("女")])],1),s("div",{staticClass:"form-group"},[s("el-input",{attrs:{type:"text",placeholder:"请填写学校","prefix-icon":"el-icon-s-promotion"},model:{value:e.edituser.school,callback:function(t){e.$set(e.edituser,"school","string"===typeof t?t.trim():t)},expression:"edituser.school"}})],1),s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"form-control",attrs:{placeholder:"请选择"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"junior"}},[e._v("初中")]),s("option",{attrs:{value:"Senior"}},[e._v("高中")]),s("option",{attrs:{value:"associate "}},[e._v("专科")]),s("option",{attrs:{value:"bachelor "}},[e._v("本科")]),s("option",{attrs:{value:"master"}},[e._v("硕士")]),s("option",{attrs:{value:"philosophy "}},[e._v("博士")]),s("option",{attrs:{value:"postdoctor"}},[e._v("博士后")])])]),s("div",{staticClass:"form-group"},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写个人简介","prefix-icon":"el-icon-warning"},model:{value:e.edituser.introduce,callback:function(t){e.$set(e.edituser,"introduce","string"===typeof t?t.trim():t)},expression:"edituser.introduce"}})],1)]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogEditVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v("确 定")])],1)],1)],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"btn btn-primary pull-right",attrs:{href:"javascript:;"}},[s("i",{staticClass:"fa fa-plus"}),e._v("\n            添加用户\n          ")])}],i=(s("ac6a"),s("8d85")),o={name:"AdminUser",data:function(){return{articleList:"",user_id:"",info:"",userList:[],formuser:{username:"",password:"",cpassword:"",avatar:"",sex:"male"},checkuser:!1,checkpass:!1,checkcpass:!1,dialogFormVisible:!1,dialogEditVisible:!1,edituser:{username:"",password:"",cpassword:"",avatar:"",sex:"",introduce:"",school:"",edubg:"",is_admin:""},options:[{value:"junior",label:"初中"},{value:"Senior",label:"高中"},{value:"associate",label:"专科"},{value:"bachelor",label:"本科"},{value:"master",label:"硕士"},{value:"philosophy",label:"博士"},{value:"postdoctor",label:"博士后"}],value:"",currentUserIndex:0}},computed:{getInfo:function(){return this.info},user:function(){return this.$store.state.user}},watch:{$route:function(e,t){e.params.user!==t.params.user&&this.getData()}},created:function(){this.getAllUsers()},methods:{getAllUsers:function(){var e=this;Object(i["d"])().then((function(t){var s=[];t.data.forEach((function(e,t,r){var a={id:e[0],username:e[1],password:e[2],avatar:e[3],introduce:e[4],sex:e[5],school:e[6],edubg:e[7],is_admin:e[8]};s.push(a)})),e.userList=s})).catch((function(e){console.log(e)}))},checkUsername:function(e){console.log(this);var t=/^[a-zA-Z]+\w*\s?\w*$/;t.test(e)?this.checkuser=!0:(this.$message.error("用户名要求以字母开头的单词字符！"),this.checkuser=!1)},checkPassword:function(e){var t=/^\w{6,16}$/;t.test(e)?this.checkpass=!0:(this.$message.error("密码要求 6 ~ 16 个单词字符！"),this.checkpass=!1)},confirmPass:function(){this.formuser.password!=this.formuser.cpassword?(this.$message.error("密码不匹配！"),this.checkcpass=!1):this.checkcpass=!0},addConfirm:function(){var e=this;if(this.checkuser)if(this.checkpass)if(this.checkcpass){var t={username:this.formuser.username,password:this.formuser.password,avatar:"https://api.adorable.io/avatars/200/".concat(this.formuser.username,".png")};Object(i["f"])(t.username,t.password,t.avatar).then((function(t){e.getAllUsers(),e.dialogFormVisible=!1,e.$message({message:"添加用户成功",type:"success"})})).catch((function(t){e.$message.error("添加用户失败")}))}else this.$message.error("密码不匹配！");else this.$message.error("密码要求 6 ~ 16 个单词字符！");else this.$message.error("用户名要求以字母开头的单词字符！")},handleDelete:function(e,t){var s=this,r=t.id,a=t.username;this.$swal({text:"你确定要删除此用户吗?",confirmButtonText:"删除"}).then((function(e){e.value&&Object(i["b"])(r,a).then((function(e){s.getAllUsers(),s.$message({message:"删除成功",type:"success"})})).catch((function(e){s.$message.error("删除失败")}))}))},handleEdit:function(e,t){t.id;this.edituser.password=t.password,this.checkPassword(this.edituser.password),this.edituser.avatar=t.avatar,this.edituser.sex=t.sex,this.edituser.school=t.school,this.value=t.edubg,this.edituser.introduce=t.introduce,this.dialogEditVisible=!0},editUser:function(){var e=this;this.checkpass?Object(i["a"])(this.userList[this.currentUserIndex].id,this.edituser.password,this.edituser.avatar,this.edituser.sex,this.edituser.school,this.value,this.edituser.introduce).then((function(t){e.dialogEditVisible=!1,e.getAllUsers()})).catch((function(e){console.log(e)})):this.$message.error("密码要求 6 ~ 16 个单词字符！")}}},l=o,n=(s("1ab2"),s("2877")),c=Object(n["a"])(l,r,a,!1,null,null,null);t["default"]=c.exports},d7b7:function(e,t,s){}}]);
//# sourceMappingURL=chunk-ee52e05e.79ff8934.js.map